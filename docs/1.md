# 1강 fastAPI의 실행흐름

나는 항상 궁금함... 그것의 원리...

fastAPI 내부는 어떻게 되어있는지...

왜 uvicorn 명령어로 실행하는건지

왜 우리가 알던 if __name__ = "__main__": 이게 안보이는건지

도대체 코드 시작은 어디서 되고있는건지?

그걸 바로 해결해주겟삼 ㅇㅇ

## uvicorn 명령어로 서버 시작하면 벌어지는 일

사실 굳이 uvicorn 명령어 안 써도 댐
아래는 uvicorn 명령어 없이 그냥 우리가 알던 방식으로 서버 킬 수 있는 코드삼

```python

# main.py
import asyncio
import os
from fastapi import FastAPI
from uvicorn import Config, Server

app = FastAPI()

@app.get("/")
async def root():
	return {"ok": True}

def run():
	host = os.getenv("HOST", "0.0.0.0")
	port = int(os.getenv("PORT", "8000"))
	# reload은 CLI에서 권장, 필요하면 Config(reload=True) 가능.
	config = Config(
		app=app, # 또는 "main:app"
		host=host,
		port=port,
		proxy_headers=True,
		lifespan="on",
	)
	server = Server(config)
	server.run() # 여기서 삥글삥글 루프가 돈다

if __name__ == "__main__":
	run()

```
이제 대충 원래 알고있던 파이썬 코드같이 보인다 그쵸잉?

저기 server.run() 에서 서버에 요청을 받는 반복문(혹은 이벤트루프) 같은게 돌고 있는거겟죠?

### 삣삐... 봐도 이해가 안 대요...

fastAPI 공부전에 파이썬 코드 직접 더 작성 해보시고 저희 파이썬 과제 복습하세요잉~~

## 더 자세하게 알고싶은데요...

더 궁금하면 직접 찾아보세용~~~~~~~~~~~~~~~~ 수고~

[(이전강의) 0. API가 뭐삼 ](docs/0.md)
[(다음강의) 2. 공식문서 해설](docs/2.md)
