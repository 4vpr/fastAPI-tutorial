# FastAPI 0강 API가 뭔데

아니 님들아 라이브세션도 있었고 아무튼 원리는 알겠다 이말이야

근데 이걸 그래서 어떻게 써야할지 막막~하고 그냥 진짜 아하! 하질 안잖슴

솔직히 api라는 용어도 잘 모르겠고 좀 글찬슴?

아주 쉽게 정리해드리겠음

## 1. API가 뭐냐

사실 api는 그냥 코에걸면 코걸이 귀에 걸면 귀걸이같은 살짝 넓은 포괄적인 개념이라 조금 이해하는데 어려울수도 잇겟다같음

우 우 우 쌀쌀쌀 API를 식당으로 비유해봐 그러면 메뉴판 같은 것임

api를 작성하는 님은 지금 메뉴판을 작성중인것임 메뉴판에는 식당이 제공하는 메뉴하고 가격이 적혀잇잔슴?

이걸 웹API에서는 어떻게 해두냐하면

[ 두식이 호마리 치킨 메뉴판 ]  
게시글 작성(가격: 게시글 내용{바디}) , 게시글 불러오기(가격: 게시글 id{쿼리}) , 유저 불러오기 (가격: 유저id{쿼리})

이렇게 되어있는것임

다른 비유로는 usb 포트도 일부 맞는 비유임

구멍을 이렇게 뚫어놨으니깐 니가 이 장치랑 통신하고 싶으면 여기 구멍에 맞게 포트를 만들라 이말임

약간 API라는 용어를 어떻게 쓰냐에 따라 구체적인 내용이 조금씩은 달라지는데(웹인지 하드웨어 드라이버 성격인지 라이브러리인지 등)

웹에서는 보통은 api 요청을 (http://api서버.com/무언가) 이렇게 하잔슴?

여기에서 [ '무언가' 를 입력했을땐 '어떤값'을 돌려준다 ]를 미리 규칙으로 정해뒀기 때문에 API라고 부르는것임

## 2. 통합 웹 서버하고 API 서버하고 다른점? (URL 관련해서 하나 알아두면 좋은점)

그래서 궁금한게 왜 굳이 API서버라고 하냐 이말임 설명대로라면 사실상 API 서버가 웹 서버랑 다를게 없잔슴?

근데 실상은 그렇지않여...

자 그럼 이제 보통 웹 구현을 어떻게 하냐

프론트 수업을 대충 들어봤잔음 이제 그건 화이트보드같은것임

이제 프론트는 그 화이트보드를 이쁘게 이쁘게 꾸며두는거고 그 html css 파일을 전송해주는 서버가 따로 있고 이제 거기 안에서

자바스크립트가 API서버한테 야 생퀴야 여기에 필요한 정보 채워넣어야해 하고 api서버에 url 요청을 하면 api서버는 그냥 옛다 하고

필요한것만 넘겨주는것임 여기서 알아야하는게 url이란 녀석임

우리는 보통 URL을 웹 브라우저 주소창으로 보게되잔슴?

근데 url 요청은 꼭 브라우저만 경로만으로 할 필요는 업슴

자바스크립트에서 url 요청을 브라우저 창에 안띄우고 그냥 코드내에서 처리할수잇음 그래서 보통은 api서버 요청 주소는 좀 더러워도 괜찮은거임 (어차피 유저한테 안보이니깐)

이래도 이해가안되는 삣삐들을 위해 아주 상세한 과정을 알려주겟음

1. 내가 김치 랭킹 사이트 topkimchi.com에 들어감

2. topkimchi.com은 김치랭킹 사이트의 정적파일을 보내줌

3. 이제 막 이쁘게 김치로 이곳저곳 꾸며진 김치랭킹 사이트를 받았음

4. 근데 이제 김치 랭킹에 대한 정보가 필요함

5. topkimchi.com/api/v1/rank?page=1 이런식으로 api 요청을 함

6. api 서버가 열심히 계산해서 {"1" : "실비김치" , "2" : "우리엄마짱맛잇어김치"} 같은걸 짜장배달부마냥 호다닥 배달을 해줌

7. 이제 나온 결과값을 브라우저에 표시해줌

8. 짜잔 김치랭킹 사이트가 유저에게 표시됨

## 3. 근데 왜 굳이 나눠서함?

그럼 여기서 한가지 의문이 들음

왜 ㅅㅂ 귀찮게 api 요청 받아주는거랑 정적파일 보내주는걸 나누는거지?

이유가 있음. 일단 웹파일이라는것은 뚱뚱함 사이트가 커질수록 프론트가 갈릴수록 뭐 이상한 채신기술 넣겟다 깝칠수록

웹페이지가 크기가 커지는데 만약 위의 김치랭킹 사이트에 접속할때마다 유저한테 보내주기전에 미리 html같은걸 수정해서 보내주도록 하면 한가지 큰 문제가 있음

사실 여러문제가 있는데 한가지 예시를 들자면

바로 유저들 로컬에 저장된 html을 쓸 수가 없음 생각해보면 프론트를 새로 업데이트하지 않는이상 유저한테 보내는 정적파일은 매번 똑같잔슴?

그래서 브라우저는 사이트 접속할때마다 자동으로 그 사이트의 정적파일을 님 하드디스크에 저장함

서버랑 유저 모두 그래서 매번 뚱뚱한 정적파일을 주고받지 않아도 괜찮은건데

위의 예시에서는 김치랭킹이 바뀌거나 새 김치가 나오기만 해도 기존 html이 무용지물이 되어버림

그렇기때문에 보통 저렇게 나눠서 하는것도 있고 당연히 협업시에 팀 분리도 쉽고 성능때문도 있고 여러 이유가 있음
